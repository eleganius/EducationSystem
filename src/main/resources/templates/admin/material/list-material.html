<!DOCTYPE html>
<html lang="ja" xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link th:href="@{/css/bootstrap.min.css}" rel="stylesheet">
	<link th:href="@{/css/style.css}" rel="stylesheet">
	<title>教材管理システム</title>
</head>

<body>
	<header>
		<nav class="navbar navbar-light bg-light">
			<div class="container">
				<a class="navbar-brand" href="">教材管理システム</a>
				<ul class="navbar-nav">
					<li class="nav-item">山田太郎 [<a href="">ログアウト</a>]</li>
				</ul>
			</div>
		</nav>
	</header>
	<div class="container">

		<h1 class="my-4 h3">視聴覚教材リスト</h1>

		<div class="row">
			<div class="col">
				<p>
					<a th:href="@{/admin/material/add}" class="btn btn-primary">視聴覚教材の追加</a>
					<a href="" class="btn btn-light">生徒リスト</a>
				</p>
				<!-- 操作に応じたメッセージを表示:start -->
				<div th:if="${message}" class="alert alert-success mt-4">
					[[${message}]]
				</div>
				<!-- 操作に応じたメッセージを表示:end -->
				<table class="table table-bordered">
					<tr>
						<th>教材名</th>
						<th>種類</th>
						<th>登録日</th>
						<th>編集</th>
						<th>削除</th>
					</tr>
					<tr th:each="material : ${materials}">
						<td><a th:href="@{/admin/material/show/{id}(id=${material.id})}">
								[[${material.name}]]
							</a></td>
						<td>[[${material.materialType.name}]]</td>
						<td>[[${#dates.format(material.created, 'yyyy年MM月dd日(E) HH時mm分ss秒')}]]</td>
						<td><a th:href="@{/admin/material/edit/{id}(id=${material.id})}" class="btn btn-warning btn-sm">編集</a></td>
						<td><a th:href="@{/admin/material/delete/{id}(id=${material.id})}"
								class="btn btn-danger btn-sm delete">削除</a></td>
					</tr>
				</table>

				<th:block th:if="${totalPages >= 2}">
					<ul class="pagination">
						<th:block th:switch="${page}">
							<li th:case="1" class="page-item disabled">
								<a class="page-link" href="">&laquo;</a>
							</li>
							<li th:case="*" class="page-item">
								<a class="page-link" th:href="@{/admin/material/list(page=${page - 1})}">&laquo;</a>
							</li>
						</th:block>

						<th:block th:each="index : ${#numbers.sequence(1, totalPages)}">
							<th:block th:switch="${index}">
								<li th:case="${page}" class="page-item active">
									<a class="page-link" href="">[[${index}]]</a>
								</li>
								<li th:case="*" class="page-item">
									<a class="page-link" th:href="@{/admin/material/list(page=${index})}">[[${index}]]</a>
								</li>
							</th:block>
						</th:block>

						<th:block th:switch="${page}">
							<li th:case="${totalPages}" class="page-item disabled">
								<a class="page-link" href="">&raquo;</a>
							</li>
							<li th:case="*" class="page-item">
								<a class="page-link" th:href="@{/admin/material/list(page=${page + 1})}">&raquo;</a>
							</li>
						</th:block>
					</ul>
				</th:block>
			</div><!-- /.col- -->
		</div><!-- /.row -->

	</div><!-- /.container -->
	<script th:src="@{/js/jquery-3.6.1.min.js}"></script>
	<script th:src="@{/js/bootstrap.bundle.min.js}"></script>
	<script th:src="@{/js/button-action.js}"></script>
</body>

</html>